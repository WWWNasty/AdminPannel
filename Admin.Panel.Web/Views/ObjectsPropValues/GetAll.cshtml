@using Admin.Panel.Core.Entities
@using System.Security.Claims
@model List<Admin.Panel.Core.Entities.Questionary.QuestionaryObject>

@{
    ViewData["Title"] = "Все Объекты";
}

<h2>@ViewBag.Title</h2>


@if (User.Identity.IsAuthenticated)
{
    if (User.IsInRole("TypesObjectRead") || User.IsInRole("UsersRead"))
    {
        <a asp-controller="ObjectsPropValues" asp-action="CreateForUser" class="btn btn-outline-primary">Создать объект</a>
    }
    if (User.IsInRole("SuperAdministrator") || User.IsInRole("UsersRead"))
    {
        <a asp-controller="ObjectsPropValues" asp-action="Create" class="btn btn-outline-primary">Создать объект</a>
    }
}

@foreach (var obj in Model)
{
    <div class="card-body">
        <input type="hidden" name="Id" value="@obj.Id" />
        <h4 class="card-title">

            <a asp-controller="ObjectsPropValues" asp-action="Get" asp-route-Id="@obj.Id" class="text-success"> @Html.DisplayFor(modelItem => obj.Name)</a>
            @obj.Code
            @obj.Description
            @obj.Updated
        </h4>

    </div>
}

@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")
}